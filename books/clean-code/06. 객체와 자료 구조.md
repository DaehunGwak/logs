# 06. 객체와 자료 구조

> - 변수를 private으로 설정하는 이유는 사용자가 변수에 의존하지 않게하기 위함이다
> - 하지만 왜 수많은 프로그래머 들이 getter, setter 를 당연히 public 으로 공개하는 것일까?

## 결론

- 자료 타입을 추가하는 유연성이 필요하다면 객체
- 새로운 동작을 추가하는 유연성이 필요하다면 자료구조와 절차지향

## 자료의 추상화

- 그저 getter, setter를 제공한다고 감춰지는 것이 아니라, 구현을 외부로 노출하는 것임
- **추상 인터페이스를 제공해 구현체를 모른 채, 자료의 핵심을 조작할 수 있어야 진정한 의미의 클래스이다**

## 자료/객체 비대칭

- 객체는 자료를 숨긴 채 자료를 다루는 함수만 제공
- 자료구조는 자료를 그대로 공개하며 별다른 함수는 제공하지 않음
- 객체지향과 절차지향 사이는 trade-off 가 있음
  - 절차지향은
    - 자료구조를 추가하기 여러우나
    - 기존 자료 구조를 변경하지 않으며
    - 새 함수를 추가하기 쉬움
  - 객체지향은
    - 새로운 함수를 추하기 어려움 -> 모든 상속 클래스를 수정해야 함
    - 기존 함수를 변경하지 않으면서
    - 새 클래스(자료타입)를 생성하기 쉬움

## 디미터 법칙

- 모듈은 자신이 조작하는 객체의 속사정을 몰라야 함
- `클래스 C의 메서드 f는 다음과 같은 객체의 메서드만 호출해야 한다`
  - 클래스 C
  - f가 생성한 객체
  - f의 인수로 넘어온 객체
  - C의 인스턴스 변수에 저장된 객체
- 위 객체에서 허용된 메서드가 반화나는 객체의 메서드는 호출하면 안됨

### 기차 충돌

```java
final String outputDir = ctxt.getOptions()
                            .getScratchDir()
                            .getAbsolutePath();
```

- 해당 방식은 피하는 편이 좋다?
- 자료구조라면 그냥 public으로 공개하고
- 객체라면 숨기자
- 그렇다고 객체 + 자료구조인 `잡종구조` 는 X

### 구조체 감추기

> 객체라면 뭔가를 하라고 말해야지 속을 드러내라고 말하면 안된다

- `getAbsolutePath()`를 하려는 이유가 밝혀진다면 해당 이유를 ctxt에게 맡기는 방식으로 진해아는 것이 좋음

```java
BufferedOutputStream bos = ctxt.createScaratchFileStream(classFileName);
```

## DTO (Data Transfer Object, 자료 전달 객체)

- 자료 구조체의 전형적인 형태
- 공개 변수만 있고 함수가 없는 클래스
- ex) DB 객체를 앱에서 사용하려 할 때 가장 처음 사용되는 구조 -> DTO
- 좀더 일반적인 형태는 Bean

### 활성 레코드 (Actvive Record)

- DTO의 특수한 형태
- save, find 같은 탐색 함수도 제공
- DB 테이블이나 다른 소스에서 자료를 직접 변환한 결과
- 따라서 활성 레코드도 자료 구조로 취급해야 함
- 주의사항!
  - 활성 레코드 레코드에 비즈니스 규칙을 추가하지 말자
  - 추가하면 잡종구조가 탄생..

## 궁금증

- 장고의 MTV 에선 비즈니스 로직을 어디에 두지?
  - https://americanopeople.tistory.com/304
